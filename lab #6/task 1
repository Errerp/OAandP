/*
    В одномерном массиве выполнить сортировку 
    положительных элементов методом слияния.
*/
#include "function.h"

void input_n(int* n) {
    int x;
    while (scanf_s("%d", &x) != 1  || x < 1 || x % 1 != 0 || getchar() != '\n') {
        printf("Ошибка. Попробуйте снова: ");
        rewind(stdin);
    }
    *n = x;
}
int choose_input(int* arr, int n,int* mass) {
    int x;
    while (scanf_s("%d", &x) != 1 || x > 2 || x < 1 || x % 1 != 0 || getchar() != '\n') {
        printf("Error. Try again: ");
        rewind(stdin);
    }
    switch (x)
    {
    case 1:
        printf("\nВведите элемент массива: \n");
        input_arr(arr, n,mass);
        break;
    case 2:
        rand_arr(arr, n,mass);
        break;
    }
    return arr, mass;
}

void sravn(int t1, int t2) {
    if (t1 < t2) {
        printf("Сортировка слиянем быстрее сортировки пузырьком\n");
    }
    else if (t2 < t1) {
        printf("Сортировка пузырьком быстрее сортировки слиянем\n");
    }
    else {
        printf("Две сортировки по времени равны\n");
    }
}

int main() {
    int  n, *arr,t1, t2,p,*mass;
    setlocale(LC_ALL, "Russian");
    srand(time(NULL));
    printf("Введите размер массива: ");
    input_n(&n);
        arr = memory_arr(n);
        mass = memory_mass(n);
    printf("Выберите способ ввода:\n1)С клавиатуры\n2)Случайные числа\n");
        choose_input(arr, n, mass);
    printf("\nНачальный массив:\n\n");
        print_arr(arr, n);
    printf("\n\nОтсортированный слиянием массив:\n\n");
    merge(mass, n,&t1);
    mass = rememory_mass(mass, n);
    zamena(mass,arr, n);
        arr = rememory_arr(arr, n);
        print_arr(arr,n);
            bad_merge(mass, n);
            mass = rememory_mass(mass, n);
            zamena(mass, arr, n);
    printf("\n\nХудшая сортировка слиянием:\n\n");
        print_arr(arr, n);
            bubble(mass,n,&t2);
            zamena(mass, arr, n);
            mass = rememory_mass(mass, n);
    printf("\n\nОтсортированный пузырьком массив:\n\n");
        print_arr(arr, n);
    printf("\n\nВремя сортировки массива слиянием = %i(мс)\n", t1);
    printf("\nВремя сортировки массива пузырьком = %i(мс)\n\n", t2);
        sravn(t1, t2);
            libertad_arr(arr, mass);
    return 0;
}
